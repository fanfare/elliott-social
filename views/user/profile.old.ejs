<% include ../partials/header %>


                
<main>
    <!-- Check if CurrentUser is the same as profile viewing and show Edit Profile button -->
    <% if(currentUser){ if(currentUser.username == profile.username){ %>
    <!-- Modal to edit profile -->
    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal Content -->
            <div class="modal-content">
                <!-- /.modal-header -->
                <div class="modal-body">
                    <form action="/<%= profile.username %>?_method=PUT" method="POST">
                        <div class="form-group">
                            <label class="editProfileLabel" for="description">Text:</label><br />
                            <textarea class="form-control" name="description"><%= profile.user.description %></textarea>
                        </div>
                        <div class="form-group">
                            <label class="editProfileLabel" for="description">Music:</label><br />
                            <input class="form-control" name="song1" value="<%= profile.user.songs.song1 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="song2" value="<%= profile.user.songs.song2 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="song3" value="<%= profile.user.songs.song3 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="song4" value="<%= profile.user.songs.song4 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="song5" value="<%= profile.user.songs.song5 %>" type="url" placeholder="url"><br />
                        </div>
                        <div class="form-group">
                            <label class="editProfileLabel" for="description">Books:</label><br />
                            <input class="form-control" name="book1" value="<%= profile.user.books.book1 %>" type="text" placeholder="title, author"><br />
                            <input class="form-control" name="book2" value="<%= profile.user.books.book2 %>" type="text" placeholder="title, author"><br />
                            <input class="form-control" name="book3" value="<%= profile.user.books.book3 %>" type="text" placeholder="title, author"><br />
                            <input class="form-control" name="book4" value="<%= profile.user.books.book4 %>" type="text" placeholder="title, author"><br />
                            <input class="form-control" name="book5" value="<%= profile.user.books.book5 %>" type="text" placeholder="title, author"><br />
                        </div>
                        <div class="form-group">
                            <label class="editProfileLabel" for="description">Links:</label><br />
                            <input class="form-control" name="link1" value="<%= profile.user.links.link1 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="link2" value="<%= profile.user.links.link2 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="link3" value="<%= profile.user.links.link3 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="link4" value="<%= profile.user.links.link4 %>" type="url" placeholder="url"><br />
                            <input class="form-control" name="link5" value="<%= profile.user.links.link5 %>" type="url" placeholder="url"><br />
                        </div>
                        <div class="form-group">
                            <label class="editProfileLabel" for="location">Location:</label>
                            <input class="form-control" name="location" value="<%= profile.user.location %>" type="text" placeholder="Location" required>
                        </div>
                        <div class="form-group">
                            <label class="editUsernameLabel" for="username">Username:</label>
                            <div>Changing this will log you out.</div>
                            <input class="form-control" name="username" value="<%= profile.username %>" type="text" required>
                        </div>
                        <div class="form-group">
                            <label class="editProfileLabel" for="color">Color:</label>
                            <input class="form-control" name="color" value="<%= (profile.user.color == null) ? '#32a852' : profile.user.color  %>" type="color" placeholder="#32a852" required>
                        </div>
                        <!-- <label class="editProfileLabel" for="color">Friend:</label>
                        <select name="friends">
                            <% users.forEach(function(user){ %>
                                <option value="<%= user.username %>"><%= user.username %></option>
                            <% }) %>
                        </select> -->
                        <!-- <div class="form-group">
                            <label class="editProfileLabel" for="image">Profile Image URL:</label>
                            <input class="form-control" name="image" value="<%= profile.user.image %>" type="text" placeholder="Profile Image URL" required>
                        </div> -->
                        <div class="form-group">
                            <button class="btn btn-lg btn-primary btn-block">Update</button>
                    </form>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
    
        <hr />
    <% } } %>
    
    
    
    
    
    <!-- Main Profile Content -->
    
    <div class="col-md-3" id="user-information">
        <span class="box large" style="background-color: <%= profile.user.color %>;"></span> 
        <h2>
            <%= profile.username %>
        </h2>
    
        <p id="profile-description">
            <h3>About</h3>
            <%= profile.user.description %>
            <br /><br />
            <b>Website:</b> <a href="http://elliott.computer">elliott.computer</a><br />
            <b>Location:</b> <%= profile.user.location %><br />
            <b>Joined:</b> <%= profile.joinDate.toDateString().substring(4, 15) %><br />
        </p><br />
    </div>
    
    <% if(profile.user.songs.song1) { %>
    <h3>Music:</h3>
    <ul>
        <% if(profile.user.songs.song1) { %><li><a href="<%= profile.user.songs.song1 %>"><%= profile.user.songs.song1 %></a></li><% } %>
        <% if(profile.user.songs.song2) { %><li><a href="<%= profile.user.songs.song1 %>"><%= profile.user.songs.song2 %></a></li><% } %>
        <% if(profile.user.songs.song3) { %><li><a href="<%= profile.user.songs.song1 %>"><%= profile.user.songs.song3 %></a></li><% } %>
        <% if(profile.user.songs.song4) { %><li><a href="<%= profile.user.songs.song1 %>"><%= profile.user.songs.song4 %></a></li><% } %>
        <% if(profile.user.songs.song5) { %><li><a href="<%= profile.user.songs.song1 %>"><%= profile.user.songs.song5 %></a></li><% } %>
    </ul>
    <% } %>
    
    <% if(profile.user.books.book1) { %>
    <h3>Books:</h3>
    <ul>
        <% if(profile.user.books.book1) { %><li><%= profile.user.books.book1 %></li><% } %>
        <% if(profile.user.books.book2) { %><li><%= profile.user.books.book2 %></li><% } %>
        <% if(profile.user.books.book3) { %><li><%= profile.user.books.book3 %></li><% } %>
        <% if(profile.user.books.book4) { %><li><%= profile.user.books.book4 %></li><% } %>
        <% if(profile.user.books.book5) { %><li><%= profile.user.books.book5 %></li><% } %>
    </ul>
    <% } %>
    
    <% if(profile.user.links.link1) { %>
    <h3>Links:</h3>
    <ul>
        <% if(profile.user.links.link1) { %><li><a href="<%= profile.user.links.link1 %>"><%= profile.user.links.link1 %></a></li><% } %>
        <% if(profile.user.links.link2) { %><li><a href="<%= profile.user.links.link1 %>"><%= profile.user.links.link2 %></a></li><% } %>
        <% if(profile.user.links.link3) { %><li><a href="<%= profile.user.links.link1 %>"><%= profile.user.links.link3 %></a></li><% } %>
        <% if(profile.user.links.link4) { %><li><a href="<%= profile.user.links.link1 %>"><%= profile.user.links.link4 %></a></li><% } %>
        <% if(profile.user.links.link5) { %><li><a href="<%= profile.user.links.link1 %>"><%= profile.user.links.link5 %></a></li><% } %>
    </ul>
    <% } %>
    
    
    <!-- Middle Tweets Panel
    <div class="col-md-6">
    <div class="panel panel-default">
    <div class="panel-heading">Tweets
        <form action="/<%= profile.username %>" method="GET">
            <div class="form-group" id="sortByDate">
                <select name="sortByDate" class="form-control" onchange="this.form.submit()">
                <% if(sortByDate === "0"){ %>
                    <option value="0">Latest First</option>
                    <option value="1">Oldest First</option>
                <% } else { %>
                    <option value="1">Oldest First</option>
                    <option value="0">Latest First</option>
                <% } %>
            </select>
            </div>
        </form>
    </div>
    
    
                    <div class="panel-body">
        <% tweets.forEach(function(tweet){ %>
            <div class="row">
                <!-- Tweet Image -->
                <div class="col-sm-1">
    
                    <!--<img  class="thumbnail tweet-image" src="<%= tweet.image %>">-->
                    <!--<img class="thumbnail tweet-image" src="<%= profile.user.image %>">-->
    
                </div>
                <!-- /.col-sm-1 -->
    
                <!-- Tweet -->
        <div class="col-sm-11 col-tweet">
            <p class="tweet-user-date">
                <strong><%= tweet.user.username %></strong> |
                <%= tweet.date.toString().substring(4, 15) %>
            </p>
    
            <p>
                <%= tweet.tweet %>
            </p>
    
    
            <p>
                <!-- If there is a user logged in & profile viewing is the same as user -->
                <% if(currentUser){ %>
                    <% if(currentUser.username == tweet.user.username){ %>
                        <form action='/tweets/<%= tweet._id %>?_method=DELETE' class="delete-form" method='POST'>
                            <button class='btn btn-danger btn-xs'>Delete</button>
                        </form>
                    <% } %>
                <% } %>
        <% }) %>
         -->
</main>
   
<% include ../partials/footer %>